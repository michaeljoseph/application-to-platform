<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Application To Platform : http://za.pycon.org/talks/28/" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Application To Platform</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/michaeljoseph/application-to-platform">View on GitHub</a>

          <h1 id="project_title">Application To Platform</h1>
          <h2 id="project_tagline">http://za.pycon.org/talks/28/</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/michaeljoseph/application-to-platform/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/michaeljoseph/application-to-platform/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="application-to-platform" class="anchor" href="#application-to-platform"><span class="octicon octicon-link"></span></a>Application To Platform</h1>

<hr><h2>
<a name="overview" class="anchor" href="#overview"><span class="octicon octicon-link"></span></a>Overview</h2>

<p>[image]()
???</p>

<h2>
<a name="this-is-the-story-of-how-yola-engineers-transformed-a-website-building-application-into-a-robust-distributed-platform-for-hosting-and-building-websites" class="anchor" href="#this-is-the-story-of-how-yola-engineers-transformed-a-website-building-application-into-a-robust-distributed-platform-for-hosting-and-building-websites"><span class="octicon octicon-link"></span></a>This is the story of how <a href="https://yola.com">Yola</a> engineers transformed a website building application into a robust, distributed platform (for hosting and building websites).</h2>

<h2>
<a name="by" class="anchor" href="#by"><span class="octicon octicon-link"></span></a>By</h2>

<p>decomposing and augmenting our services layer into multiple Python-driven API services</p>

<p>in a series of small low-risk changes (which i’ll discuss in more detail)</p>

<p>we organically built out the service layer.</p>

<hr><h2>
<a name="other-talks" class="anchor" href="#other-talks"><span class="octicon octicon-link"></span></a>Other talks</h2>

<ul>
<li><p>yodeploy and yoconfigurator</p></li>
<li><p>yola’s hosting platform</p></li>
<li><p>release automation and continuous deployment</p></li>
</ul><p>???
This talk mostly concerns itself with the python API services layer, since i’m the Services Team Lead.</p>

<h2>
<a name="there-are-a-number-of-other-interesting-talks-that-i-have-yet-to-convince-some-yola-colleagues-to-prepare" class="anchor" href="#there-are-a-number-of-other-interesting-talks-that-i-have-yet-to-convince-some-yola-colleagues-to-prepare"><span class="octicon octicon-link"></span></a>There are a number of other interesting talks that I have yet to convince some Yola colleagues to prepare</h2>

<h1>
<a name="overview-1" class="anchor" href="#overview-1"><span class="octicon octicon-link"></span></a>overview</h1>

<ul>
<li><p>patterns</p></li>
<li><p>organisational attributes</p></li>
<li><p>roadmap</p></li>
</ul><p>???
I shall attempt to:</p>

<ul>
<li>extract and present some patterns that worked for us</li>
<li>discuss the organisational flexibility and engineering workflow that enabled us to refactor the system architecture, and</li>
</ul><h2>
<a name="--share-the-medium-term-roadmap-for-our-system" class="anchor" href="#--share-the-medium-term-roadmap-for-our-system"><span class="octicon octicon-link"></span></a>- share the medium term roadmap for our system.</h2>

<h1>
<a name="history" class="anchor" href="#history"><span class="octicon octicon-link"></span></a>History</h1>

<p><img src="2007-beta-architecture.png" alt="image">
???
In the beginning, we had an application. It was called The Sitebuilder. And it was good. Well, pretty good.
We had an application that lived on two servers in 2007 (along with a php website and wordpress blog and database).
Except smart people :)
<a href="https://github.com/nbm" class="user-mention">@nbm</a>: architecture goals, decided that soa was the way to go (it was also a buzzword back in the day, it  was a thing guys).</p>

<h2>
<a name="over-the-next-2-years-we-evolved-a-reasonably-robust-platform" class="anchor" href="#over-the-next-2-years-we-evolved-a-reasonably-robust-platform"><span class="octicon octicon-link"></span></a>over the next 2 years we evolved a reasonably robust platform</h2>

<h1>
<a name="makeover" class="anchor" href="#makeover"><span class="octicon octicon-link"></span></a>Makeover</h1>

<p><img src="yola-2007-2009-diff.png" alt="image"><img src="instances-artifacts-graph.png" alt="image">
???
our architect created lovely architecture changelogs and when he left us for Facebook (which is becoming a damn theme at yola these days).
Someone please tweet <a href="https://github.com/nbm" class="user-mention">@nbm</a> and <a href="https://github.com/vhata" class="user-mention">@vhata</a> that I name dropped him
A successor was not named. Then the fun started :)</p>

<h2>
<a name="timeline-graph-of-synthasite--yola-architecture--instances--deployable-artifacts" class="anchor" href="#timeline-graph-of-synthasite--yola-architecture--instances--deployable-artifacts"><span class="octicon octicon-link"></span></a>Timeline graph of synthasite / yola architecture: # instances; # deployable artifacts</h2>

<hr><h1>
<a name="before-and-after" class="anchor" href="#before-and-after"><span class="octicon octicon-link"></span></a>Before And After</h1>

<p><img src="http://raw.github.com/michaeljoseph/pyconza2013/slide-4-before-after.jpg" alt="Alt text">
???
end 2009: paymentservice, checkoutservice, domainservice
sitebuilder
php website
wordpress blog</p>

<p>oct 2013: We have around 30 deployable applications, service apis, front-ends and automation/testing repositories.</p>

<h2>
<a name="applications-and-installables" class="anchor" href="#applications-and-installables"><span class="octicon octicon-link"></span></a>applications and installables</h2>

<ul>
<li><p>frontends: sb is pretty much the same application, we’ve added helper services around it to absorb the load, we now have a logged in user management site: MyYola and a CMS for brochure-ware (the main website)</p></li>
<li>
<p>storage: from single spofs to one level of database redundancy, with automatic backups
(where are the Yola people in the audience? We should test some restores sometime guys?)</p>

<ul>
<li>s3, no more NFS</li>
</ul>
</li>
<li><p>pure services: userservice, , domainservice, michango, rankmonitor</p></li>
<li><p>applications: myyola, checkoutservice, yolacom [+ apis]</p></li>
</ul><hr><h1>
<a name="patterns" class="anchor" href="#patterns"><span class="octicon octicon-link"></span></a>patterns</h1>

<ul>
<li><p>build out and release new service calls independent of consumuing clients</p></li>
<li>
<p>refactor apps</p>

<ul>
<li>re-use standard python service clients to reduce development time</li>
</ul>
</li>
<li><p>switch clients</p></li>
<li><p>rm old implementation / cleanup / decommission</p></li>
<li>
<p>same deal for rotating hardware</p>

<ul>
<li>spin up a fresh box</li>
<li>provision</li>
<li>test</li>
<li>load balance in, load balance out
]
???
some notes
--- 
# evolving services with service-clients</li>
</ul>
</li>
<li><p>shittiest python code is (in only a few places, hopefully): python 2.6, django &lt; 1.4, piston, sloppy testing practices, complicated code with production bug fixing barnacles that works</p></li>
<li><p>new apis: python 2.7, djrf, django</p></li>
<li><p>small api: flask</p></li>
<li><p>python service clients: <a href="https://github.com/yola/demands"><code>demands</code></a>. &lt;3 kennethreitz</p></li>
<li><p>new user facing app: django 1.5, cbvs, south, asset compression, front end dependency toolchain (lessc, bower, grunt)</p></li>
</ul><hr><h1>
<a name="organisational-enablers-engineering-workflow" class="anchor" href="#organisational-enablers-engineering-workflow"><span class="octicon octicon-link"></span></a>organisational enablers; engineering workflow</h1>

<p>Being careful not to over engineer in advance [abstraction astronaut] we delayed major technology decision making</p>

<p>In hindsight it seems obvious: the decentralised, internet-based, just-in-time way of working that has risen to popularity in the wake of companies like github, facebook and valve.</p>

<p>A flat organisational structure and hiring smart people means that you don’t really need to worry about who does what and when, as long as there is work to be done and some degree of priorisation, smart engineers just get the job done.</p>

<p>-- decision making and meritocracies with a BDFL</p>

<p>Github pull requests and code review have transformed the way the team works.
Many eyeballs make all the bugs shallower and there’s always a paper trail.</p>

<p>[graph of deploys per day]
we're no github, but we do alright</p>

<hr><h1>
<a name="how-wed-approach-it-today" class="anchor" href="#how-wed-approach-it-today"><span class="octicon octicon-link"></span></a>how we’d approach it today</h1>

<p>pretty much the way i just described it.
[org + workflow]
release early and often: keep the changes small and pointy, lowers the cognitive overhead of review, increased confidence in pushing out new code, small surface area of introduced bugs to inspect (they’re shallow anyway because we have many eyeballs)</p>

<hr><h1>
<a name="roadmap" class="anchor" href="#roadmap"><span class="octicon octicon-link"></span></a>roadmap</h1>

<p>[succession]()</p>

<p>???</p>

<ul>
<li>database succession</li>
<li>feature flags and user segmenting, better dogfooding</li>
</ul><hr><h2>
<a name="roadmap-1" class="anchor" href="#roadmap-1"><span class="octicon octicon-link"></span></a>Roadmap</h2>

<h3>
<a name="monitoring" class="anchor" href="#monitoring"><span class="octicon octicon-link"></span></a>Monitoring</h3>

<p>[monitoring]()</p>

<p>???
    - monitoring: we use pingdom, graphite, munin and sentry
    - stuff mainly just goes in there (unless there’s a problem. for the size of cluster we operate, these tools are generally sufficient)</p>

<h2>
<a name="----------we-need-a-monitoring-dashboard-next-juicy-devops-project" class="anchor" href="#----------we-need-a-monitoring-dashboard-next-juicy-devops-project"><span class="octicon octicon-link"></span></a>        - we need a monitoring dashboard (next juicy devops project)</h2>

<h1>
<a name="roadmap-what-was-hard" class="anchor" href="#roadmap-what-was-hard"><span class="octicon octicon-link"></span></a>roadmap: what was hard</h1>

<h2>
<a name="roadmap-2" class="anchor" href="#roadmap-2"><span class="octicon octicon-link"></span></a>Roadmap</h2>

<h3>
<a name="--monitoring" class="anchor" href="#--monitoring"><span class="octicon octicon-link"></span></a>- Monitoring</h3>

<h3>
<a name="--what-was-hard" class="anchor" href="#--what-was-hard"><span class="octicon octicon-link"></span></a>- What was hard</h3>

<ul>
<li><p>slow</p></li>
<li><p>boring</p></li>
</ul><p>???</p>

<h2>
<a name="waiting-for-improvements-to-compound-almost-at-the-singularity" class="anchor" href="#waiting-for-improvements-to-compound-almost-at-the-singularity"><span class="octicon octicon-link"></span></a>Waiting for improvements to compound, almost at the singularity</h2>

<h2>
<a name="summary" class="anchor" href="#summary"><span class="octicon octicon-link"></span></a>summary</h2>

<p><img src="about-to-summit.png" alt="funny picture"></p>

<p>Slideshow created using <a href="http://github.com/gnab/remark">remark</a>.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Application To Platform maintained by <a href="https://github.com/michaeljoseph">michaeljoseph</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
